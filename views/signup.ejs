<!DOCTYPE html>
<html lang="id">
<head>
    <%- include('partials/header') %>
</head>
<body>
    <!-- Loading Spinner -->
    <div id="loader-wrapper">
        <div id="loader"></div>
    </div>
    
<%- include('partials/navbar') %>
<section class="background-section">
    <section class="signup-wrapper d-flex align-items-center justify-content-center">
        <div class="signup-container shadow rounded p-4 bg-white">
            <h2 class="signup-title text-center mb-4">Buat Akun KarirKu</h2>
            <form class="signup-form">
                <div class="mb-3">
                    <label for="nama" class="form-label">Nama Lengkap</label>
                    <input type="text" id="nama" name="nama" class="form-control" required placeholder="Nama Lengkap">
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Alamat Email</label>
                    <input type="email" id="email" name="email" class="form-control" required placeholder="Alamat Email">
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Kata Sandi</label>
                    <div class="input-group">
                        <input type="password" id="password" name="password" class="form-control" required placeholder="Kata Sandi">
                        <button class="btn btn-outline-secondary toggle-password" type="button" data-target="#password">
                            <i class="fa fa-eye"></i>
                        </button>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="konfirmasi" class="form-label">Konfirmasi Kata Sandi</label>
                    <div class="input-group">
                        <input type="password" id="konfirmasi" name="konfirmasi" class="form-control" required placeholder="Konfirmasi Kata Sandi">
                        <button class="btn btn-outline-secondary toggle-password" type="button" data-target="#konfirmasi">
                            <i class="fa fa-eye"></i>
                        </button>
                        <div class="invalid-feedback">
                            Konfirmasi kata sandi tidak cocok.
                        </div>
                    </div>
                </div>
                <div class="d-grid">
                    <button type="button" onclick="daftar()" class="btn btn-primary-custom">Daftar Sekarang</button>
                </div>
                <p class="text-center mt-3 signup-login-link">Sudah punya akun? <a href="/login">Masuk di sini</a></p>
            </form>
        </div>
    </section>
</section>

<%- include('partials/footer') %>

<script>

    // KONFIRMASI KATA SANDI
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('.signup-form');
        const password = document.getElementById('password');
        const konfirmasi = document.getElementById('konfirmasi');

        form.addEventListener('submit', (e) => {
            if (password.value !== konfirmasi.value) {
            konfirmasi.classList.remove('is-valid');
            konfirmasi.classList.add('is-invalid');
            e.preventDefault();
            } else {
            konfirmasi.classList.remove('is-invalid');
            konfirmasi.classList.add('is-valid');
            }
        });

        konfirmasi.addEventListener('input', () => {
            if (password.value === konfirmasi.value) {
            konfirmasi.classList.remove('is-invalid');
            konfirmasi.classList.add('is-valid');
            } else {
            konfirmasi.classList.remove('is-valid');
            konfirmasi.classList.add('is-invalid');
            }
        });
    });

    function daftar(){
        var nama = $("#nama").val();
        var email = $("#email").val();
        var password = $("#password").val();

        $.ajax({
            url: "https://herbaemas.com/register-karir",
            type: "POST",
            data: {fullname: nama, email: email, password: password},
            dataType: "json",
            success: function(data){
                if(data.status == 200){
                    alert(data.msg)
                }else{
                    alert(data.msg)
                }
            }
        })
    }

</script>

</body>
</html>